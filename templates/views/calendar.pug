extends ../layouts/default
block extrahead
  link(href='/styles/fullcalendar.min.css', rel='stylesheet')
  link(href='/styles/fullcalendar.print.min.css', rel='stylesheet', media='print')
block intro    
    section#page-breadcrumb
      .vertical-center.sun
        .container
          .row
            .action
              .col-sm-12
                h1.title= (profile && profile.isStudent ? 'Student' : 'Teacher') + "'s calendar"
                p= (profile && profile.isStudent ? 'Check it out!' : 'Book your classes!')
    // /#action
block content    
    section#calendar-section
      .container
        .row
          if profile
            .col-md-2
              .user-photo
                img.img-responsive(src=profile.photo.url, alt="User's photo")
              .media-body
                .timezone
                  i.fa.fa-globe
                  | #{(profile.timezone ? profile.timezone.text : 'not set')}
                  br
                  i.fa.fa-globe
                  | local:
                  span
                .user-name
                  a(href='/user/' + profile.id)= profile.name.full
              .panel.panel-default#panel-participants
                // Default panel contents
                .panel-heading Participants
                // Table
                table#participants.table
            .col-md-8
              #calendar
            .col-md-2
              .media-body.credits
                i.fa.fa-money
                | Total credits: 
                span= (!isNaN(parseFloat(user.credits)) ? user.credits : 'not set')
                h3 Help Section
                p Cras justo odio, dapibus ac facilisis in, egestas eget quam. Donec id elit non mi.          
          else
            .col-md-2 No data.              
    // /#map-section
    .modal.fade#myModal(tabindex='-1', role='dialog')
      .modal-dialog(role='document')
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true') Ã—
            h4.modal-title Book class
          .modal-body.save-event
            .book-event
              p
                strong Your current credits balance is: 
                span.curr-balance
              p
                strong This event will be scheduled from:
                br
                span.start
                |  to 
                span.end
              p
                strong This will cost you: 
                spans.cost
              p
                strong 
                  | Your balance in credits will be: 
                span.balance
            .problem.hidden
              p There was a problem
          .modal-footer
            button.btn.btn-default(type='button', data-dismiss='modal') Cancel
            button.btn.btn-primary(type='button', data-dismiss='modal', onclick='saveCalendarEvent()') OK
        // /.modal-content
      // /.modal-dialog
    // /.modal    
    script.
      var userid = '#{userid}';
      var timezone = !{JSON.stringify(timezone)};
      var qid = '#{qid}';
      var startBusinessHours = '#{startBusinessHours}';
      var endBusinessHours = '#{endBusinessHours}';
      var isStudent = #{user.isStudent};
      var isTeacher = #{user.isTeacher};
      var curCredits = #{user.credits};
      var owner = !{JSON.stringify(owner)};
append footer
  script(src='/js/calendar/lib/moment.min.js')
  script(src='/js/fullcalendar.min.js')
  script(type="text/javascript" src="/js/calendar.js")